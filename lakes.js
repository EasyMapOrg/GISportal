var fs = require("fs");
var request = require("request");
var async = require("async");
var fs = require("fs");
var _ = require("lodash");


var lakes = {
    "00000002": "SUPERIOR",
    "00000003": "VICTORIA",
    "00000004": "ARAL-Sea",
    "00000005": "HURON",
    "00000006": "MICHIGAN",
    "00000007": "TANGANYIKA",
    "00000008": "BAYKAL BAIKAL",
    "00000009": "GREAT-BEAR-Lake",
    "00000010": "MALAWI NYASA NIASSA",
    "00000011": "GREAT-SLAVE-Lake",
    "00000012": "ERIE",
    "00000013": "WINNIPEG",
    "00000014": "CHAD",
    "00000015": "ONTARIO",
    "00000016": "LADOGA",
    "00000017": "BALQASH",
    "00000018": "ONEGA",
    "00000020": "TITICACA",
    "00000021": "NICARAGUA COCIBOLCA GRANADA",
    "00000022": "TURKANA",
    "00000023": "ATHABASCA",
    "00000024": "VOLTA -Lake",
    "00000025": "ISSYK-KUL",
    "00000026": "GREAT-SALT-Lake",
    "00000028": "REINDEER-Lake",
    "00000029": "VÄNERN",
    "00000030": "ALBERT",
    "00000031": "WINNIPEGOSIS",
    "00000033": "KUYBYSHEVSKOYE",
    "00000034": "URMIA",
    "00000035": "KARIBA -Lake",
    "00000036": "MWERU",
    "00000037": "MANITOBA",
    "00000038": "NIPIGON",
    "00000039": "BRATSKOYE-Reservoir",
    "00000040": "ZAYSAN -Lake",
    "00000041": "QINGHAI",
    "00000042": "CAHORA--BASSA -Lake",
    "00000043": "TAYMYR",
    "00000044": "WOODS -Lake-of-the",
    "00000045": "KHANKA-Lake",
    "00000046": "MIRIM",
    "00000047": "RYBINKSKOYE-Reservoir",
    "00000048": "NASSER -Lake",
    "00000050": "PEIPUS PEIPSI",
    "00000051": "VAN",
    "00000053": "UVS-Lake",
    "00000055": "TANA",
    "00000057": "CEDAR-Lake",
    "00000058": "ALAKOL",
    "00000059": "KHUVSGUL-Lake",
    "00000061": "VOLGOGRADSKOYE",
    "00000062": "ILIAMNA-Lake",
    "00000064": "TONLÉ-SAP-Lake",
    "00000066": "TAIHU-Lake",
    "00000067": "KIVU",
    "00000068": "WOLLASTON-Lake",
    "00000069": "EDWARD_ÉDOUARD",
    "00000071": "TSIMLYANSKOYE-Reservoir",
    "00000072": "SOUTHERN-INDIAN-Lake",
    "00000073": "ZZZZ",
    "00000075": "HULUN-Lake",
    "00000077": "THERTHAR-Lake",
    "00000078": "POYANG-Lake",
    "00000079": "KAKHOVS'KE-Reservoir",
    "00000081": "BANGWEULU",
    "00000084": "CHIQUITA",
    "00000086": "RUKWA",
    "00000087": "KREMENCHUK_KREMENCHUTS'KE-Reservoir",
    "00000088": "ZEYSKOYE",
    "00000089": "IJSSELMEER",
    "00000090": "MAI-NDOMBE",
    "00000091": "NAM-Lake",
    "00000092": "CHANY",
    "00000093": "KRASNOYARSKOYE",
    "00000094": "GENERAL-CARRERA_BUENOS-AIRES",
    "00000095": "VÄTTERN",
    "00000099": "KYOGA",
    "00000100": "MARTRE",
    "00000102": "UST-ILIMSKOYE",
    "00000103": "WILLISTON-Lake",
    "00000104": "KAMSKOYE_KAMA-Reservoir",
    "00000105": "SILING",
    "00000106": "BROKOPONDO",
    "00000109": "HUNG-TSE-Lake",
    "00000110": "SAKAKAWEA",
    "00000111": "SAIMAA",
    "00000112": "KHANTAYSKOYE-VODOKHRANILISHCHE",
    "00000113": "SARATOVSKOYE",
    "00000114": "OKEECHOBEE",
    "00000116": "KAINJI-Reservoir",
    "00000117": "ARGENTINO-Lake",
    "00000119": "MWERU-WANTIPA",
    "00000120": "TENGIZ",
    "00000121": "KHYARGAS-Lake",
    "00000122": "OAHE",
    "00000125": "CLAIRE",
    "00000127": "RONGE",
    "00000131": "KAPSHAGAY-Reservoir",
    "00000132": "RINCÓN-DEL-BONETE_-Lago-de",
    "00000133": "POOPÓ-Lake",
    "00000134": "ZZZZ",
    "00000135": "SEVAN-Lake",
    "00000136": "VYGOZERO",
    "00000137": "CREE-Lake",
    "00000142": "KHAR-US-Lake",
    "00000145": "BECHAROF-Lake",
    "00000146": "SAINT-CLAIR",
    "00000147": "LESSER-SLAVE-Lake",
    "00000149": "ESKIMO-Lakes",
    "00000150": "TOBA",
    "00000151": "RED-Lake-(Upper-and-Lower)",
    "00000153": "CHAPALA_-Laguna-de",
    "00000154": "GURI-Reservoir",
    "00000156": "EYASI",
    "00000157": "PÄIJÄNNE",
    "00000158": "SAINT-JEAN",
    "00000160": "BELOYE",
    "00000163": "MÄLAREN",
    "00000165": "CHAMPLAIN",
    "00000166": "ABAYA-Lake",
    "00000167": "O'HIGGINS_SAN-MARTÍN-Lake",
    "00000171": "VIEDMA-Lake",
    "00000172": "GOD'S-Lake",
    "00000173": "RAZAZZA",
    "00000176": "MANAGUA",
    "00000179": "ZHARI-NAMCO",
    "00000181": "BOSTEN-Lake",
    "00000186": "KUMSKOYE-VODOKHRANILISHCHE",
    "00000187": "ORIVESI_-PYHÄSELKÄ",
    "00000190": "NOVOSIBIRSKOYE",
    "00000192": "ILMEN",
    "00000193": "GORKY-Reservoir",
    "00000194": "SALTON_-Sea",
    "00000195": "PIELINEN",
    "00000198": "NIPISSING",
    "00000200": "ABITIBI",
    "00000201": "FORT-PECK-Lake",
    "00000202": "OULUJÄRVI",
    "00000205": "BAY_-Laguna-de",
    "00000209": "LLANQUIHUE-Lake",
    "00000210": "ALEXANDRINA",
    "00000215": "TANGRA-YUMCO",
    "00000219": "COLHUÉ-HUAPI",
    "00000220": "EZEQUIEL-RAMOS-MEJÍA",
    "00000222": "PETER-POND-Lake",
    "00000225": "SOUTH-MOOSE-Lake",
    "00000228": "SEGOZERSKOYE",
    "00000231": "MANGUEIRA",
    "00000233": "CHAOHU-Lake",
    "00000236": "SIMCOE",
    "00000237": "VOTKINSK-Reservoir",
    "00000239": "ULUNGUR-Lake",
    "00000240": "PYASINO",
    "00000241": "SARYGAMYSH-Lake",
    "00000242": "KOVDOZERO",
    "00000243": "TOLEDO-BEND-Reservoir",
    "00000244": "DEAD_-Sea",
    "00000245": "IZABAL",
    "00000247": "SASYQKOL",
    "00000249": "HIRAKUD-Reservoir",
    "00000250": "PROLETARSKOYE",
    "00000255": "TUMBA",
    "00000256": "CHILWA",
    "00000262": "KULUNDINSKOYE",
    "00000265": "CAXIUANA",
    "00000267": "BEYŞEHIR",
    "00000268": "BIWA-Lake",
    "00000271": "SELETYTENIZ",
    "00000273": "PYAOZERO",
    "00000277": "COARI_-Lago-de",
    "00000279": "AL-ASSAD-Lake",
    "00000281": "DORÉ-Lake",
    "00000287": "GAOYOU-Lake",
    "00000291": "BEI'ER-Lake",
    "00000294": "KHAR-Lake",
    "00000295": "TAUPO",
    "00000296": "SHARDARA-Reservoir",
    "00000297": "EBINUR-Lake",
    "00000299": "BUFFALO-Lake",
    "00000300": "ELING_NGORING-Lake",
    "00000301": "CROSS-Lake",
    "00000302": "HALA-Lake",
    "00000303": "NORTH-MOOSE-Lake",
    "00000304": "FAGNANO_CAMI-Lake",
    "00000306": "LAGDO",
    "00000310": "BALATON",
    "00000311": "ATLIN-Lake",
    "00000312": "AYAKKUM-Lake",
    "00000314": "UPEMBA",
    "00000316": "TATHLINA-Lake",
    "00000322": "NATRON",
    "00000323": "CHURCHILL-Lake",
    "00000326": "DESCHAMBAULT-Lake",
    "00000327": "GENEVA_LÉMAN",
    "00000328": "MINGACEVIR-Reservoir",
    "00000329": "SALINES-GRANDES",
    "00000332": "TOWUTI",
    "00000333": "BLACK-Lake",
    "00000336": "GYARING_ZHALING-Lake",
    "00000337": "STEPHENS-Lake",
    "00000339": "HAZEN",
    "00000340": "WINNEBAGO",
    "00000343": "NAHUEL-HUAPI-Lake",
    "00000344": "KRASNOYE",
    "00000347": "GANDHI-Reservoir",
    "00000350": "MALHEUR-Lake",
    "00000351": "DAUPHIN-Lake",
    "00000352": "CONSTANCE_BODENSEE",
    "00000354": "NGANGLA-RINGCO",
    "00000356": "SANDY-Lake",
    "00000358": "RAZIM-Lake",
    "00000360": "JURUMIRIM-Reservoir",
    "00000361": "DNIPRODZERZHYNS'KE-Reservoir",
    "00000362": "SAM-RAYBURN_-Lake",
    "00000363": "GRANVILLE-Lake",
    "00000366": "MILLE-LACS-Lake",
    "00000367": "TROUT-Lake",
    "00000375": "FLATHEAD-Lake",
    "00000376": "LOKKA-Reservoir",
    "00000377": "NAKNEK_-NORTH-ARM-NAKNEK-Lake",
    "00000379": "CERROS-COLORADOS-Complex",
    "00000380": "TAHOE",
    "00000382": "QYARING-Lake",
    "00000383": "TARO-Lake",
    "00000387": "HJÄLMAREN",
    "00000390": "EGIRDIR",
    "00000391": "ILE-A-LA-CROSSE",
    "00000393": "STORSJÖN",
    "00000399": "GRAND-Lake",
    "00000400": "BOIS_-Lac-des",
    "00000403": "MARKAKOL",
    "00000405": "MONTREAL-Lake",
    "00000407": "SAYRAM-Lake",
    "00000408": "HAMMAR",
    "00000409": "PRIMROSE-Lake",
    "00000410": "SYVASH-Lake",
    "00000411": "PYRAMID-Lake",
    "00000415": "NAM-NGUM",
    "00000416": "RANCO-Lake",
    "00000418": "ABY",
    "00000420": "MILLS-Lake",
    "00000423": "SAINT-PIERRE_SAINT-PETER-Lake",
    "00000426": "COLVILLE-Lake",
    "00000427": "VOZHE",
    "00000430": "FABER-Lake",
    "00000434": "KUBENSKOYE",
    "00000436": "KYIVS'KE-Reservoir",
    "00000439": "MAPAM-YUMCO",
    "00000442": "GOVIND-BALLABH-PANT-Reservoir",
    "00000443": "CARDIEL-Lake",
    "00000444": "NGANGZE-Lake",
    "00000445": "ZIWAY-Lake",
    "00000447": "KLUANE-Lake",
    "00000448": "MUSTERS",
    "00000450": "LEECH-Lake",
    "00000454": "MOLSON-Lake",
    "00000455": "WHITE-NILE-Reservoir",
    "00000456": "WULANWULA-Lake",
    "00000458": "BISTCHO-Lake",
    "00000459": "ZZZZ",
    "00000461": "KAYRAKKUMSKOYE_KAIRAKUM-Reservoir",
    "00000462": "ITEZHI-TEZHI-Dam",
    "00000464": "GOOSE-Lake",
    "00000465": "KELLER-Lake",
    "00000470": "KARAKUL-Lake",
    "00000471": "KANIVS'KE-Reservoir",
    "00000472": "NIZHNEE-KUYTO",
    "00000474": "PINEHOUSE-Lake",
    "00000481": "NEAGH",
    "00000482": "KARSAKUWIGAMAK-Lake",
    "00000483": "CHUKCHAGIRSKOYE",
    "00000484": "HADITHAH-Dam-Lake",
    "00000485": "LAGOS",
    "00000486": "TROUT-Lake",
    "00000487": "POSO",
    "00000488": "SCUTARI_SKADARSKO",
    "00000489": "DORSOIDONG-Lake",
    "00000491": "AUBRY",
    "00000494": "AGUA-VERMELHA_-Represa-de",
    "00000500": "UDYL'",
    "00000501": "STUART-Lake",
    "00000502": "BOLON'",
    "00000505": "GARDA",
    "00000508": "COLD-Lake",
    "00000509": "ZZZZ",
    "00000511": "AQQIKKOL-lake",
    "00000513": "CANACARI",
    "00000515": "VALENCIA",
    "00000518": "MJØSA",
    "00000520": "CHIBZHANG-Lake_-East",
    "00000523": "UTAH-Lake",
    "00000524": "LANAO",
    "00000526": "OHRID",
    "00000527": "ABHE",
    "00000528": "TUNGABHADRA-Reservoir",
    "00000529": "OXFORD-Lake",
    "00000531": "LIANGZI-Lake",
    "00000533": "LACHA",
    "00000534": "LIVINGSTON_-Lake",
    "00000536": "BANGONG-Lake",
    "00000538": "SAINT-MARTIN",
    "00000539": "LONGGAN_LONGHU-Lake",
    "00000540": "MAUNOIR",
    "00000543": "URRU-Lake",
    "00000545": "CORMORANT-Lake",
    "00000546": "PEND-OREILLE",
    "00000549": "DURGUN-Lake",
    "00000550": "QUSMURYN-Lake",
    "00000552": "AKŞEHIR",
    "00000554": "CLARK",
    "00000555": "QUINZE_-Lac-des-and-SIMARD",
    "00000556": "MARION",
    "00000558": "OLD-WIVES-Lake",
    "00000559": "UPPER-KLAMATH-Lake",
    "00000562": "VAAL-Dam",
    "00000566": "AMISK-Lake",
    "00000569": "KAKISA-Lake",
    "00000572": "YELLOWSTONE-Lake",
    "00000579": "CHAMO-Lake",
    "00000581": "SPLIT_-Lake",
    "00000586": "MALOMBE",
    "00000588": "COCHRANE_PUEYRREDÓN-Lake",
    "00000590": "CUITZEO",
    "00000592": "LUMAJANGDONG-Lake",
    "00000594": "TORNETRÄSK",
    "00000596": "DANJIANGKOU-Reservoir",
    "00000601": "KRASNODARSKOYE",
    "00000603": "UBOLRATANA",
    "00000604": "SHALA-Lake",
    "00000608": "OREL'",
    "00000609": "KEKEXILI-Lake",
    "00000612": "ZZZZ",
    "00000613": "TSHANGALELE",
    "00000616": "CHOMEN-Lake",
    "00000618": "SAINT-LUCIA",
    "00000620": "DONGTING-Lake",
    "00000622": "MAHARANA-PRATAP-Reservoir",
    "00000623": "DAGUAN-Lake",
    "00000624": "SWAN-Lake",
    "00000627": "DIANCHI-Pool",
    "00000629": "DABUXUN-Lake",
    "00000630": "ACHIT-Lake",
    "00000632": "TUSTUMENA-Lake",
    "00000633": "TIMISKAMING",
    "00000634": "IZNIK",
    "00000635": "BELOT",
    "00000637": "HONDO",
    "00000639": "XIJIR-ULAN-Lake",
    "00000645": "BUUNTSAGAAN-Lake",
    "00000646": "CLEARWATER-Lake",
    "00000648": "ROGAGUADO-Lake",
    "00000649": "PUMA-YUMCO",
    "00000654": "SILJAN",
    "00000657": "HÖYTIÄINEN",
    "00000667": "SITIDGI-Lake",
    "00000669": "UTIKUMA-Lake",
    "00000672": "SMOOTHSTONE-Lake",
    "00000674": "KISALE",
    "00000676": "RAKSHASTAL_LA'NGA",
    "00000677": "BEAR-Lake",
    "00000679": "VÕRTSJÄRV",
    "00000681": "NGOIN",
    "00000683": "ITANDÉUA",
    "00000684": "KISKITTOGISU-Lake",
    "00000685": "PAIKU-Lake",
    "00000687": "GEORGE",
    "00000688": "SONG-KUL",
    "00000690": "PRESPA",
    "00000699": "PAVYLON",
    "00000702": "ZZZZ",
    "00000706": "BEYSUGSKIY",
    "00000708": "HONGHU-Lake",
    "00000710": "UDDJAURE",
    "00000713": "TOBIN-Lake",
    "00000718": "GOZHA-Lake",
    "00000723": "ENRIQUILLO",
    "00000725": "DOGAI-CORING",
    "00000728": "RED-DEER-Lake",
    "00000729": "TOKTOGUL-Reservoir",
    "00000730": "QUILL-LAKES_-West",
    "00000731": "ZAPATOSA",
    "00000732": "ZHUONAI-Lake",
    "00000733": "KISKITTO-Lake",
    "00000736": "KUSAI-Lake",
    "00000738": "HABBANIYAH-Lake",
    "00000744": "DAGZE-Lake",
    "00000746": "MAUREPAS",
    "00000748": "CALCASIEU-Lake",
    "00000754": "CUMBERLAND-Lake",
    "00000755": "CHABYER-Lake",
    "00000756": "KRONOTSKOYE",
    "00000761": "WINNIBIGOSHISH",
    "00000767": "ERHAI-Lake",
    "00000770": "VICENTE-GUERRERO-Reservoir",
    "00000771": "WASEKAMIO-Lake",
    "00000773": "UUREG-Lake",
    "00000779": "WAPAWEKKA-Lake",
    "00000782": "PASFIELD-Lake",
    "00000783": "LAMA",
    "00000785": "DEBO",
    "00000790": "WULIANGSU-Sea",
    "00000791": "SHIJIU-Lake",
    "00000792": "NERPICHYE",
    "00000794": "SARTLAN",
    "00000797": "RED-SUCKER-Lake",
    "00000799": "ZZZZ",
    "00000800": "CORANGAMITE",
    "00000801": "FEIA",
    "00000804": "SACHIGO",
    "00000805": "BICHE_-Lac-la",
    "00000806": "QAROUN",
    "00000810": "PLONGE_-Lac-la",
    "00000811": "STORA-LULEVATTEN",
    "00000812": "LEXIE-WUDAN-Lake",
    "00000817": "GREAT-BITTER-Lake",
    "00000818": "TAAL-Lake",
    "00000819": "DONGGEI-CUONA-Lake",
    "00000824": "MOULTRIE",
    "00000825": "TISHKE",
    "00000827": "DALI-NUO'ER",
    "00000829": "LANGANO-Lake",
    "00000831": "RUPANCO-Lake",
    "00000833": "SIRINDHORN",
    "00000836": "SALVADOR",
    "00000837": "WATERHEN-Lake",
    "00000840": "YALPUH-Lake",
    "00000849": "BLACKWATER-Lake",
    "00000851": "TENIS",
    "00000870": "ZZZZ",
    "00000872": "WHITE-Lake",
    "00000876": "WEISHAN-Lake",
    "00000879": "ZZZZ",
    "00000881": "BURDUR-Lake",
    "00000882": "UPPER-UGASHIK-Lake",
    "00000883": "MONO-Lake",
    "00000892": "FUXIAN-Lake",
    "00000893": "NEUCHÂTEL",
    "00000894": "MOLOCHNYI-Lake",
    "0000089B": "MARKERMEER",
    "00000902": "TEKE",
    "00000904": "WASWANIPI",
    "00000905": "ONEIDA-Lake",
    "00000907": "SHALKAR",
    "00000908": "LOCHE_-Lac-la",
    "00000910": "CANOE-Lake",
    "00000913": "XURU-Lake",
    "00000915": "CABALIANA",
    "00000917": "ZIMBAMBO",
    "00000920": "TELMEN-Lake",
    "00000924": "CUORENDEJIA",
    "00000929": "GEORGE",
    "00000931": "ROBERT-S.-KERR-Reservoir",
    "00000934": "PUKAKI",
    "00000936": "YANISYARNI",
    "00000937": "RANA-PRATAP-Lake",
    "00000940": "LABERGE",
    "00000944": "BOLSHOYE-MORSKOYE",
    "00000945": "HANHOWUZ-HOWDANY-Reservoir",
    "00000949": "NAMEW-Lake",
    "00000953": "URUA",
    "00000954": "INLAND-Lake",
    "00000957": "ALAOTRA",
    "00000960": "MALYE-CHANY",
    "00000962": "DEL-TORO",
    "00000970": "BAITU_-CAIZI_-XIZI_-DAISAI-Lakes",
    "00000975": "GUIERS_-Lac-de",
    "00000976": "BARTLETT-Lake",
    "00000977": "REED-Lake",
    "00000982": "SANGIIN-DALAY-Lake",
    "00000983": "RINQIN-XUB-Lake",
    "00000985": "ULAKH-ULYUNG",
    "00000989": "ZIGE-TANG-Lake",
    "00000990": "GEHU-Lake",
    "00001003": "TALBOT-Lake",
    "00001007": "GUÁRICO-Reservoir",
    "00001009": "MISSISA-Lake",
    "00001010": "LOWER-UGASHIK-Lake",
    "00001011": "BOLSHOY-UVAT",
    "00001013": "RØSSVATNET",
    "00001016": "COIPASA-Lake",
    "00001019": "MAHONEY-Lake",
    "00001026": "AMERICAN-FALLS-Reservoir",
    "00001028": "BOLMEN",
    "00001029": "EVORON",
    "00001031": "CHAGAN-Lake",
    "00001035": "KYZYLKAK",
    "00001044": "JINGYU-Lake",
    "00001046": "KABAMBA",
    "00001050": "KUCHUKSKOYE",
    "00001053": "ATHAPAPUSKOW-Lake",
    "00001054": "CHAMBRI-Lake",
    "00001057": "CORRIB",
    "00001058": "MAMAWI-Lake",
    "00001059": "UKAL",
    "00001060": "CIENAGA-DE-PAJARAL",
    "00001061": "NILAKKA",
    "00001062": "WEKUSKO_WEKISKO-Lake",
    "00001063": "HADA-NAIHAOLAI",
    "00001066": "BAM-Lake",
    "00001071": "KESAGAMI-Lake",
    "00001075": "LAST-MOUNTAIN-Lake",
    "00001076": "DUKAN-Lake",
    "00001079": "CUONA",
    "00001083": "ELTON",
    "00001096": "AKSAYQUIN-Lake",
    "00001099": "ZZZZ",
    "00001107": "JUNSHAN-Lake",
    "00001109": "VILLARRICA",
    "00001110": "HIRFANLI",
    "00001111": "URU-URU",
    "00001115": "NEUSIEDLER-Lake",
    "00001116": "ROSSIGNOL",
    "00001121": "NEGRA",
    "00001128": "WALKER-Lake",
    "00001129": "GRAND-Lake",
    "00001130": "TUOSU-Lake",
    "00001137": "AIAPUÁ",
    "00001145": "KUŞ",
    "00001146": "ABIJATA-Lake",
    "00001148": "MATTAMUSKEET",
    "00001149": "RANN-OF-KUTCH-Lake",
    "00001154": "ABERT",
    "00001157": "KOKA-Lake",
    "00001169": "WABIGOON-Lake",
    "00001170": "GREAT-Lake",
    "00001174": "JILI-Lake",
    "00001184": "GUSINOYE",
    "00001187": "OZHOGINO",
    "00001188": "CLEAR-Lake",
    "00001190": "GRANGE-DE-MONTE-ALEGRE",
    "00001192": "KYEBXANG-Lake",
    "00001193": "CANYON-FERRY-Lake",
    "00001195": "ZZZZ",
    "00001196": "GALILEE_-Sea-of",
    "00001199": "DEVILS-Lake",
    "00001201": "VANAJAVESI",
    "00001203": "ARAS-DAM",
    "00001204": "KASUMIGAURA",
    "00001205": "DAIHAI-Sea",
    "00001206": "DUSHAN-Lake",
    "00001207": "PUYEHUE",
    "00001208": "CHLYA",
    "00001213": "CHATYR-KOL",
    "00001216": "BERRE",
    "00001218": "NYUMBA-YA-MUNGU-Reservoir",
    "00001219": "NATH-Lake",
    "00001221": "PELICAN-Lake",
    "00001222": "BEAVERHILL-Lake",
    "00001236": "ULUBAT",
    "00001237": "FINGER-Lake",
    "00001239": "TAZLINA-Lake",
    "00001240": "PYHÄJÄRVI",
    "00001241": "TEFÉ",
    "00001246": "LAPPAJÄRVI",
    "00001248": "BARINGO",
    "00001249": "WALKER-Lake",
    "00001257": "TAGE",
    "00001259": "STROBEL",
    "00001264": "JUNÍN",
    "00001266": "WELLINGTON",
    "00001270": "BOHU-Lake",
    "00001273": "ARAPA",
    "00001282": "TEPOUMA",
    "00001283": "MU_-BINGNI",
    "00001286": "KARASOR",
    "00001293": "ZZZZ",
    "00001294": "AIRAG-Lake",
    "00001295": "LLANCANELO",
    "00001302": "TSO-MORIRI",
    "00001307": "MAINIT",
    "00001319": "SVIR'",
    "00001323": "PALUNG-Lake",
    "00001327": "TUDAKUL-Lake",
    "00001336": "BONG-Lake",
    "00001344": "OOLOGAH-Lake",
    "00001354": "MEMAR-Lake",
    "00001355": "GENERAL-VINTTER_PALENA-Lake",
    "00001358": "FUTOU-Lake",
    "00001359": "WANAPITEI-Lake",
    "00001360": "QAMYSTYBAS",
    "00001361": "ZZZZ",
    "00001368": "KISSIMMEE",
    "00001370": "CALLING-Lake",
    "00001375": "CANDLE-Lake",
    "00001377": "ROMBEBAI",
    "00001381": "SOLUNTAKH",
    "00001382": "DUNG-Lake",
    "00001392": "TYRIFJORDEN",
    "00001409": "TANDURE-Lake",
    "00001417": "BEIHUO-LUXUN-Lake",
    "00001421": "NANHU-Lake",
    "00001422": "HINDMARSH",
    "00001423": "SKAGERN",
    "00001424": "GOOSE-Lake",
    "00001425": "WASEKAMIO-Lake",
    "00001430": "LUOMA-Lake",
    "00001431": "OROG-Lake",
    "00001432": "PUNG-Lake",
    "00001434": "ÁLVARO--OBREGÓN",
    "00001437": "TANSIN_-Laguna-de",
    "00001445": "BAIRAB-Lake",
    "00001467": "ROSS-R.-BARNETT-Reservoir",
    "00001479": "ATITLÁN_-Lago-de",
    "00001482": "ZZZZ",
    "00001489": "WINEFRED-Lake",
    "00001493": "APOPKA",
    "00001498": "SEBAGO-Lake",
    "00001501": "MATATILA-DAM-Reservoir",
    "00001503": "CHANGHU-Lake",
    "00001504": "ZHELIN-Reservoir",
    "00001505": "SNIARDWY",
    "00001509": "SUMMER-Lake",
    "00001510": "QUILL-LAKES_-East",
    "00001511": "PELLEGRINI-Lake",
    "00001516": "BAUNT",
    "00001518": "CILDIR",
    "00001519": "DERG",
    "00001524": "GORDON-Lake",
    "00001526": "ERNE_-Lower",
    "00001529": "TRASIMENO",
    "00001534": "DAWA-Lake",
    "00001535": "GRANDE-DO-CURUAI-(northern-part-of)",
    "00001537": "VICTORIA",
    "00001540": "ZZZZ",
    "00001547": "CREAN-Lake",
    "00001551": "CHUKOCHYE",
    "00001555": "INDAWGYI-Natural-Lake",
    "00001557": "GASI-KULE-Lake",
    "00001560": "REI_-Lago-do",
    "00001567": "CHOKE-CANYON-Reservoir",
    "00001569": "NIDILI",
    "00001573": "UNARBA-2-ya",
    "00001576": "ZZZZ",
    "00001582": "NIGHT-HAWK-Lake",
    "00001583": "CALAFQUÉN",
    "00001584": "AFRERA",
    "00001594": "SUGGI-Lake",
    "00001596": "BOLSENA",
    "00001597": "YANGCHENG-Lake",
    "00001608": "KIRPILSKIY_-BOLSHOY-ORLINYY_-ZOLOTOY_-et-al.",
    "00001609": "UYALY",
    "00001613": "KEPPETEKH",
    "00001616": "POELELA",
    "00001618": "MIYUN-Reservoir",
    "00001619": "CHEM-Lake",
    "00001623": "WILLIAM-Lake",
    "00001627": "AZUEI",
    "00001629": "BULMER-Lake",
    "00001632": "NARVSKOYE-VODOKHRANILISHCHE",
    "00001640": "DAVY-Lake",
    "00001649": "MÜRITZ",
    "00001652": "DAGGYAI-Lake",
    "00001653": "XIAOHAIZI-Reservoir",
    "00001656": "ZZZZ",
    "00001658": "DONGPING-Lake",
    "00001659": "NAIVASHA",
    "00001666": "ZZZZ",
    "00001676": "EGG-Lake",
    "00001684": "SUQIAN-Lake",
    "00001703": "KISTIGAN-Lake",
    "00001706": "ROCKY-Lake",
    "00001714": "POYGAN",
    "00001726": "TEREWAH_NARRAN-Lake",
    "00001730": "RINGCO-KONGMA",
    "00001734": "OMUK-KYUEL'",
    "00001735": "MALARTIC",
    "00001740": "MARFIL",
    "00001745": "SKILAK-Lake",
    "00001748": "ALMANOR",
    "00001749": "POZUELO_-Laguna-de",
    "00001752": "PARANAPITINGA_-POCÃO-GRANDE_-Lago-do",
    "00001756": "GREAT-SACANDAGA-Lake",
    "00001761": "CASCADE",
    "00001771": "RWERU",
    "00001774": "KABELE",
    "00001785": "EAST-TAIJI-NAI'ER-Lake",
    "00001787": "BOLSHOYE-EROVNOYE",
    "00001789": "DENGIZKUL",
    "00001790": "YAGGAIN-Lake",
    "00001793": "SHALKAR-EGAKARA",
    "00001801": "KABWE",
    "00001802": "SAN-PEDRO",
    "00001806": "ARU-Lake",
    "00001807": "JIEZE-Lake",
    "00001812": "TAIYANG-Lake",
    "00001815": "LITTLE-SACHIGO-Lake",
    "00001818": "MANITOU",
    "00001827": "LAGKOR-Lake",
    "00001831": "GLAFSFJORDEN",
    "00001832": "NORTH-WABASCA-Lake",
    "00001835": "WEST-TAIJI-NAI'ER-Lake",
    "00001840": "ERCEK",
    "00001841": "INAWASHIRO",
    "00001853": "MANDIORÉ",
    "00001869": "IHOTRY",
    "00001871": "LUNGMU-Lake",
    "00001872": "ROGAGUA",
    "00001887": "ZZZZ",
    "00001891": "DOGAICORING-QANG-Lake",
    "00001893": "ROXEN",
    "00001902": "MANINJAU",
    "00001904": "ZZZZ",
    "00001908": "SLED-Lake",
    "00001910": "PIGEON-Lake",
    "00001913": "TRICHONIS_TRICHONIDA",
    "00001917": "XIANGYANG-Lake",
    "00001928": "HEISHI-NORTH-Lake",
    "00001941": "VALLI-DI-COMACCHIO",
    "00001943": "CHIUTA",
    "00001945": "KEELEY-Lake",
    "00001951": "QUACHUNA-Lake",
    "00001954": "ZZZZ",
    "00001955": "ACARÁ_-Lago-do",
    "00001958": "ARGAZI-Reservoir",
    "00001967": "BUROG-Lake",
    "00001969": "AQKOL",
    "00001970": "MUGQU-Lake",
    "00001971": "GOMANG-Lake",
    "00001975": "EPECUÉN",
    "00001979": "ZHANGDU-Lake",
    "00001984": "UNDEN",
    "00001989": "DOG-Lake",
    "00001993": "XIASHAN-Reservoir",
    "00001997": "SYRKOVOYE",
    "00002012": "PUEBLO-VIEJO",
    "00002015": "BARROS_-Lagoa-dos",
    "00002018": "YUELIANG-Lake",
    "00002019": "TURSUNSKIY-TUMAN",
    "00002021": "LAWFORD-Lake",
    "00002027": "KOSTROMSKOYE",
    "00002032": "EAGLE-Lake",
    "00002048": "LINGGO-Lake",
    "00002054": "VUOHIJÄRVI",
    "00002057": "ZZZZ",
    "00002064": "KAWEENAKUMIK-Lake",
    "00002073": "SARMIENTO-Lake",
    "00002085": "JINXI-Lake",
    "00002092": "CASTILLOS_-Laguna-de",
    "00002097": "PAKWASH-Lake",
    "00002099": "MONTE_-Laguna-del",
    "00002102": "MAWDESLEY-Lake",
    "00002104": "DATONG-Lake",
    "00002107": "OROTKO",
    "00002109": "JACQUES_-Lac-a",
    "00002111": "CIENAGA-CHILLOA",
    "00002112": "ITARIM",
    "00002113": "TENIZ",
    "00002116": "QAGOI-Lake",
    "00002117": "BIRCH-Lake",
    "00002124": "AWASA",
    "00002127": "HUOSHAOHEI_-TAHLAG_-YAMENQI_-AOBAO_-XIAOSHANG-Lakes",
    "00002129": "KAHUL-Lake",
    "00002130": "TADENET-Lake",
    "00002132": "SPRING-Lake",
    "00002138": "QUEMO-Lake",
    "0000213A": "PLAYGREEN - Lake",
    "0000213B": "LITTLE - PLAYGREEN - Lake",
    "00002148": "KISHI-QARAOY-KOLI",
    "00002156": "CHANGDANG-Lake",
    "00002157": "ATASTA",
    "00002162": "GULL-Lake",
    "00002167": "LUBĀNS",
    "00002168": "MILLWOOD-Lake",
    "00002179": "SEMMENS-Lake",
    "00002186": "PINGVALLAVATN",
    "00002190": "CHILA_-Laguna-de",
    "00002192": "BUFFALO-Lake",
    "00002199": "ZZZZ",
    "00002201": "BILIKOL",
    "00002202": "CAM-Lake",
    "00002203": "SENGLI-Lake",
    "00002226": "KHANSKOYE",
    "00002228": "ZZZZ",
    "00002232": "MOKOAN",
    "00002238": "BARKOL",
    "00002239": "URYUM",
    "00002243": "PARU",
    "00002245": "OAK-Lake",
    "00002246": "ANOLGYTGYN",
    "00002253": "CLEAR-LAKE-Reservoir",
    "00002259": "BARIL-Lake",
    "00002262": "DEZADEASH-Lake",
    "00002263": "KAZAN-Lake",
    "00002264": "KURILSKOYE",
    "00002270": "BAYAN-Lake",
    "00002271": "KINKONY",
    "00002273": "CHONDUYA",
    "00002276": "KOTCHO-Lake",
    "00002280": "IBERÁ-WETLANDS-(part-of)",
    "00002285": "EBEYTY",
    "00002304": "YANGHU-Lake",
    "00002305": "SALT-WATER-Lake",
    "00002313": "IHEMA",
    "00002314": "KHUKH-Lake",
    "00002315": "BEIDAGANG-Reservoir",
    "00002316": "SUYAHU-Reservoir",
    "00002317": "CHIEMSEE",
    "00002323": "PEERLESS-Lake",
    "00002326": "CHIP-Lake",
    "00002330": "HARGRAVE-Lake",
    "00002331": "ANDREEVSKOYE",
    "00002335": "BIRCH-Lake",
    "00002336": "NORRA-DELLEN",
    "00002345": "HOUGHTON-Lake",
    "00002351": "COPP-Lake",
    "00002358": "GLAN",
    "00002361": "MARGOG-Lake",
    "00002364": "ZZZZ",
    "00002365": "HAWIZEH-MARSHES",
    "00002367": "ASSEAN-Lake",
    "00002368": "BIG-SANDY-Lake",
    "00002369": "BLACK-Lake",
    "00002371": "BERING-Lake",
    "00002388": "BASKUNCHAK",
    "00002395": "CADDABASSA",
    "00002403": "BROOKS",
    "00002408": "ZZZZ",
    "00002415": "CUODA-RIMA",
    "00002418": "TURTLE-Lake",
    "00002420": "WATERHEN-Lake",
    "00002421": "CHITEK-Lake",
    "00002425": "NARAČ",
    "00002427": "FATI",
    "00002436": "WEYAKWIN-Lake",
    "00002447": "MARGARET-Lake",
    "00002470": "RICHARDSON-Lake",
    "00002473": "STORSJÖN",
    "00002475": "YUYE-Lake",
    "00002477": "WELLESLEY-Lake",
    "00002484": "CATEMACO",
    "00002485": "ZZZZ",
    "00002495": "CLIVE-Lake",
    "00002497": "LEUSHINSKIY-TUMAN",
    "00002507": "ZZZZ",
    "00002511": "MEIRIQIECUOMARI",
    "00002516": "LOMOND",
    "00002517": "GUANTING-Reservoir",
    "00002518": "ZZZZ",
    "00002525": "FYORDOVOYE",
    "00002528": "CHUKOCHYE",
    "00002532": "NISSUM-FJORD_-BØVLING-FJORD_-FELSTED-KOG",
    "00002535": "ULAKHAN-KYUEL'",
    "00002540": "ZZZZ",
    "00002544": "LENORE-Lake",
    "00002547": "DAYAN-Lake",
    "00002550": "ZZZZ",
    "00002554": "ŁEBSKO-Lake",
    "00002559": "LA-GAIBA-Lake",
    "00002560": "WITCHEKAN-Lake",
    "00002569": "SERBUG-Lake",
    "00002594": "JACKFISH-Lake",
    "00002595": "WASKESIU-Lake",
    "00002611": "NERI-PUN-Lake",
    "00002613": "NYI",
    "00002616": "HARRIS",
    "00002627": "IK",
    "00002649": "CHIHU-Lake",
    "00002655": "TETLIN-Lake",
    "00002663": "OIGON-Lake",
    "00002673": "WHITEMOUTH-Lake",
    "00002682": "UVSIIN-KHAR-US-Lake",
    "00002693": "ILOPANGO_-Lago-de",
    "00002695": "RUZHNIKOVA",
    "00002696": "BOLSHOYE-YAROVOYE",
    "00002701": "DAXI-HAIZI-Reservoir",
    "00002709": "ARSENAULT-Lake",
    "00002720": "GOMO-Lake",
    "00002724": "LECHE_-Laguna-de-la",
    "00002725": "ZZZZ",
    "00002731": "MURIEL-Lake",
    "00002750": "SUTURUAKA",
    "00002762": "CORONDA",
    "00002779": "ZZZZ",
    "00002786": "ZZZZ",
    "00002798": "RUNN",
    "00002799": "PHELPS-Lake",
    "00002803": "KOTLABUKH-Lake",
    "00002809": "SIMPSON-Lake",
    "00002812": "POTHOLES-Reservoir",
    "00002819": "TELASHI-Lake",
    "00002839": "SHAOBO-Lake",
    "00002877": "MARGAI-Lake",
    "00002881": "ZZZZ",
    "00002898": "GRENADA-Lake",
    "00002907": "PARINACOCHAS",
    "00002923": "MANCHAR-Lake",
    "00002926": "ORON",
    "00002927": "VARANO_-Lago-di",
    "00002940": "TUMAN",
    "00002944": "REDBERRY-Lake",
    "00002946": "NGOIN",
    "00002955": "UVILDY",
    "00002960": "ZZZZ",
    "00002961": "KURCHANSKIY",
    "00002965": "MANDJE",
    "00002970": "NEWELL",
    "00002974": "KELSEY-Lake",
    "00002978": "BURT-Lake",
    "00002985": "ZHIZHITSKOYE",
    "00002988": "ALLEMANDS_-Lac-des",
    "00003002": "ZZZZ",
    "00003007": "CIENAGA-DE-AYAPEL",
    "00003020": "KELUKE-Lake",
    "00003025": "HOURTIN_-Lac-d'",
    "00003040": "ZZZZ",
    "00003044": "YIBUG-Lake",
    "00003045": "XUEJING-Lake",
    "00003053": "LAS-SALINAS",
    "00003078": "NGOINYAR-Lake",
    "00003079": "GARSON-Lake",
    "00003097": "VYSHNEVOLOTSKOYE",
    "00003109": "EBRO-Reservoir",
    "00003111": "LUOTUO-Lake",
    "00003114": "NESS",
    "00003129": "ROREY-Lake",
    "00003132": "ZZZZ",
    "00003133": "KILEKALE-Lake",
    "00003135": "WUSKWATIM-Lake",
    "00003150": "ZZZZ",
    "00003156": "YURBA-Lake",
    "00003171": "MARRYAT-Inlet",
    "00003173": "BALYMA",
    "00003188": "STE.-ANNE",
    "00003189": "GEORGE",
    "00003191": "TOWADA",
    "00003196": "CAZAUX-ET-DE-SANGUINET_-ÉTANG-DE",
    "00003200": "TALIMARDZHAN-Reservoir",
    "00003201": "ROLA-Lake",
    "00003203": "TALAHONG_-DELONG_-YANGCAOHAO-Lakes",
    "00003208": "ZZZZ",
    "00003211": "ZZZZ",
    "00003218": "MELINCUÉ-Lake",
    "00003219": "ZZZZ",
    "00003231": "FROG-Lake",
    "00003238": "VERRET",
    "00003243": "KINGSMERE-Lake",
    "00003258": "BUGUNSKOYE-WATER-Reservoir",
    "00003268": "KORIENTZE",
    "00003276": "MALOYE-EROVNOYE",
    "00003281": "ORSASJÖN_ORSA-Lake",
    "00003307": "BRACCIANO",
    "00003309": "KYTAI-Lake",
    "00003312": "KUBUY",
    "00003343": "PONGYIN-Lake",
    "00003347": "DUVANKUL'",
    "00003350": "DABIE",
    "00003365": "ARAKHLEY",
    "00003373": "ASSAL",
    "00003379": "RAZNAS",
    "00003392": "MAGISS-Lake",
    "00003394": "DANGQIONG-Lake",
    "00003397": "MONTIGNY_-Lac-de",
    "00003398": "DYRYN-EBE",
    "00003421": "ZZZZ",
    "00003446": "RUFUS-Lake",
    "00003471": "ZZZZ",
    "00003476": "SHITOU-KOUMEN-Reservoir",
    "00003478": "SORELL",
    "00003493": "CRATER-Lake",
    "00003500": "MARALDY",
    "00003523": "WABIMEIG-Lake",
    "00003529": "ZZZZ",
    "00003534": "GARKUNG-Lake",
    "00003539": "BAIDOI-Lake",
    "00003570": "COLEN-Lakes-(western-part-of)",
    "00003587": "CARDINAL-Lake",
    "00003604": "BASIN-Lake",
    "00003607": "BORAPHET",
    "00003614": "VENUSTIANO-CARRANZA",
    "00004292": "BRATEŞ",
    "00004503": "MENDOTA",
    "00005506": "GREAT-POND",
    "00006785": "ERKEN",
    "00006786": "TAY",
    "00007889": "MELVIN",
    "00008089": "BADABAG",
    "00009168": "DRANOV",
    "00009322": "SUNAPEE",
    "00011740": "WINDERMERE",
    "00012262": "LEVEN",
    "00012471": "TROUT-lake",
    "00012943": "KATRINE",
    "00013377": "DOUGLAS-Lake",
    "00013916": "GORGOVA",
    "00015309": "ROŞU",
    "00016662": "JIJILA",
    "00016814": "LUMINA",
    "00017329": "MERHEI",
    "00163748": "BASSENTHWAITE",
    "00164293": "ULLSWATER",
    "00164384": "DERWENT-Water",
    "00208447": "MATITA",
    "00208662": "FORTUNA",
    "00208962": "ISAC",
    "00209099": "PUIU",
    "00211002": "AUBURN",
    "00213513": "SANABRIA",
    "GLBL00000001": "CURONIAN",
    "GLBL00000002": "KATI-THANDA-LAKE-EYRE"
}

// Build all the cache files
// this makes a load new layer request to a GIS portal instance; resulting config
// files will be in the config/site_settings/pmpc1465.npm.ac.uk/temporary_cache folder
function buildConfigFiles() {
    for (l in lakes) {
        $.ajax({
            url: 'https://pmpc1465.npm.ac.uk/app/settings/load_new_wms_layer?url=https://rsg.pml.ac.uk/thredds/wms/globolakes/v1.04/Calimnos-1M_FRS_MERIS-' + l + '-v1.04.nc',
            complete: function(jqXHR, textStatus) {
                console.log(textStatus);
            }
        });
    }
}

// load the master config file
var masterContent = fs.readFileSync('lakes_config.json');
var masterConfig = JSON.parse(masterContent);


// Reverse geocode the positions
// Each lakes' geometry is stored in a file where the id and name are used as the 
// filename and a WKT description of the geometry is the only content
function reverseGeocode() {
    var googleAPIkey = 'AIzaSyC6o_jbNvcfKEHl12qPJN7aq08gupKbY2M';
    var path = '/data/datasets/Projects/projects-nobackup/GloboLakes/Calimnos/calimnos/resources/polygons/globolakes/wkt';
    var files = fs.readdirSync(path);
    var queue = [];

    for (var l = 0; l < files.length; l++) {
        lakeCount++;

        var f = path + '/' + files[l];
        var lakeId = files[l].substr(0, files[l].indexOf('_')).toString();
        var lakeName = files[l].substr(9, (files[l].length - 13));

        globolakes['_' + lakeId] = {
            'Name': lakeName
        };

        var content = fs.readFileSync(f, 'utf8');
        var coords = content.split('((')[1];
        var firstPoint = coords.split(',')[0];
        var lonlat = firstPoint.split(' ');
        var geocodeUrl = 'https://maps.googleapis.com/maps/api/geocode/json?latlng=' + lonlat[1] + ',' + lonlat[0] + '&key=' + googleAPIkey + '&id=' + lakeId;

        queue.push({ url: geocodeUrl });
    }

    async.eachLimit(queue, 1, function(url, next) {
            request(url, function(error, response, body) {
                if (!error && response.statusCode == 200) {
                    lakeCount--;
                    var id = response.request.uri.query.split('id=')[1].toString();

                    results = JSON.parse(body);
                    if (results.results.length > 0) {
                        if (typeof(results.results[0].address_components) !== 'undefined') {
                            var address = results.results[0].address_components;
                            for (var i = 0; i < address.length; i++) {
                                if (_.indexOf(address[i].types, 'country') > -1) {
                                    globolakes['_' + id].country = address[i].long_name;
                                }
                                if (_.indexOf(address[i].types, 'administrative_area_level_1') > -1) {
                                    globolakes['_' + id].admin_area = address[i].long_name;
                                }
                            }
                        }

                    }
                    if (results.status = 'OK') {
                        createUpdatedConfigFile(id, globolakes['_' + id]);
                    } else {
                        console.log(id + ' : ' + results.status);
                    }
                } else {
                    console.log('This one did not work:' + error);
                }
                next();
            });
        },
        function(complete) {
            console.log(globolakes);
            fs.writeFile('/home/bac/git/web-development/GISportal/globolakes-geocoded.txt', JSON.stringify(globolakes), 'UTF8', function() {
                console.log('globolakes written to /home/bac/git/web-development/GISportal/globolakes-geocoded.txt')
            })
            console.log('finished');
        });

}

// Update the config files with the correct niceName values from the human adjusted 
// config file, and then add location tags
function createUpdatedConfigFile(lakeId, geocoded) {

    var originPath = "/home/bac/git/web-development/GISportal/config/site_settings/pmpc1465.npm.ac.uk/temporary_cache"
    var destPath = "/home/bac/git/web-development/GISportal/config/site_settings/pmpc1465.npm.ac.uk"
    var filename = 'rsg.pml.ac.uk-thredds-wms-globolakes-v1.04-Calimnos-1M_FRS_MERIS-' + lakeId + '-v1.04.nc.json';

    // load up the original config file
    var f = originPath + '/' + filename;
    var content = fs.readFileSync(f, 'utf8');
    var config = {};
    try {
        config = JSON.parse(content);
    } catch (e) {
        console.log('could not parse config ' + lakeId);
        return false; // there's no point going on if we have no config
    }

    // set the provider tags
    config.options.providerShortTag = "PML";
    //the WCS url
    var wcsURL = config.wmsURL.replace('/wms/', '/wcs/');
    config.wcsURL = wcsURL;
    // contact details
    config.contactInfo = {
        "person": "Remote Sensing Group",
        "email": "calimnos-support@pml.ac.uk",
        "address": "",
        "phone": "+44 (0)1752 633100",
        "position": ""
    }

    // then the layers...
    //for (layer in config.server.Layers) {
    _.forEach(config.server.Layers, function(layer) {
        if (layer.hasOwnProperty('Name')) { // check that it's actually a layer
            layer.include = true;

            // scalebar settings
            layer.autoScale = true;
            layer.defaultStyle = "boxfill/rainbow";
            layer.colorbands = 255;
            layer.LegendSettings = {
                "scalePoints": true,
                "Rotation": 90,
                "Parameters": {
                    "colorbaronly": true,
                    "height": 500,
                    "width": 30
                }
            }

            // add the geographic tags
            var masterLayer = _.find(masterConfig.server.Layers, function(l) { return l.Name == layer.Name });
            if (typeof(masterLayer) !== 'undefined') {
                layer.tags = masterLayer.tags;
            } else {
                layer.tags.indicator_type = ['Missing Nicename'];
            }
            layer.tags.lake_id = lakeId;
            layer.tags.Lake = geocoded.Name;
            layer.tags.country = geocoded.country;
            layer.tags.administrative_area = geocoded.admin_area;
        }
    });
    // save it all to the new config file
    var target = destPath + '/' + filename;
    fs.writeFileSync(target, JSON.stringify(config), 'utf8');
}



var globolakes = {};
var lakeCount = 0;

reverseGeocode();
//createUpdatedConfigFiles();